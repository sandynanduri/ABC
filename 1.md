# JIRA Requirement: Comprehensive Analysis of Interest Rate Products Based on Economic Terms in CDM

## Description:

Conduct a comprehensive analysis to identify and document how Interest Rate (IR) products are represented, qualified, and processed in the Common Domain Model (CDM) based on economic terms. The analysis should examine the complete economic term structure, qualification logic, payout configurations, lifecycle event processing, validation rules, and all aspects that determine how IR products are modeled, classified, and used within the CDM framework. This analysis will serve as a comprehensive learning resource for understanding IR products in CDM.

## Background:

The Common Domain Model (CDM) uses a sophisticated product model where financial products are represented through `EconomicTerms` objects that contain all price-forming features. For Interest Rate products specifically, the `EconomicTerms` type includes not only payout structures but also dates (effectiveDate, terminationDate), date adjustments, termination provisions, calculation agents, collateral, and validation rules.

Understanding how IR products are modeled and processed in CDM is critical for:
- Ensuring accurate product classification and qualification in systems implementing CDM
- Understanding the complete economic term structure beyond just payouts
- Supporting downstream processing, event lifecycle management, and regulatory compliance
- Enabling proper mapping between source systems and CDM representations
- Facilitating learning and adoption of CDM by developers, business analysts, and system implementers

The CDM contains:
- **Qualification functions** (e.g., `Qualify_AssetClass_InterestRate`, `Qualify_InterestRate_Option_Swaption`, `Qualify_InterestRate_Forward_Debt`) that evaluate economic terms to determine product classification
- **Event processing functions** that use economic terms for lifecycle event calculations
- **Validation rules and conditions** that constrain valid economic term configurations
- **Complete economic term structures** including dates, adjustments, provisions, and payout compositions

A comprehensive analysis should cover all these aspects to provide a complete understanding of how IR products work in CDM.

## Business Requirement:

1. **Document the Complete Economic Terms Structure:**
   - Analyze and document all components of the `EconomicTerms` type for IR products:
     - `effectiveDate` and `terminationDate` (AdjustableOrRelativeDate structures)
     - `dateAdjustments` (BusinessDayAdjustments)
     - `payout` (Payout structure with applicable payouts)
     - `terminationProvision` (TerminationProvision)
     - `calculationAgent` (CalculationAgent)
     - `nonStandardisedTerms` (boolean flag)
     - `collateral` (Collateral structure, if applicable)
   - Document how each component is used and structured for IR products
   - Provide examples showing complete economic term structures

2. **Document the IR Product Qualification Logic:**
   - Identify and document all qualification functions related to Interest Rate products
   - Map the logical conditions and rules used to qualify products as IR products
   - Document how different payout combinations (interestRatePayout, optionPayout, forwardPayout, cashflow) contribute to IR product qualification
   - Document the qualification hierarchy (AssetClass → BaseProduct → SubProduct → TransactionType)

3. **Analyze Payout Structures and Configurations:**
   - Document all applicable payouts for IR products (interestRatePayout, optionPayout, forwardPayout, cashflow)
   - Document all non-applicable payouts for IR products and explain why
   - Analyze payout composition patterns (e.g., how multiple interestRatePayouts form swap legs)
   - Document payout cardinality rules (e.g., when count = 1, count = 2, or count > 1)
   - Analyze underlier structures for optionPayout and forwardPayout in IR context

4. **Map IR Product Subtypes:**
   - Document how specific IR product types are qualified:
     - IR Swaps (vanilla, basis, cross-currency, etc.)
     - Swaptions (InterestRate_Option_Swaption)
     - Debt Options (InterestRate_Option_DebtOption)
     - Bond Forwards (InterestRate_Forward_Debt)
     - FRAs, Caps/Floors, and other IR derivatives
   - Identify the distinguishing economic term patterns for each IR product subtype
   - Document ISDA taxonomy mappings (v1 and v2) associated with IR product qualifications
   - Map product subtypes to their specific payout configurations

5. **Analyze Validation Rules and Constraints:**
   - Document all conditions and validation rules that apply to IR product economic terms
   - Identify business rules that constrain valid economic term configurations
   - Document date validation rules (e.g., effectiveDate vs terminationDate relationships)
   - Document payout validation rules (e.g., required combinations, cardinality constraints)

6. **Document Economic Terms in Event Processing:**
   - Analyze how economic terms are used in lifecycle event processing for IR products
   - Document event functions that reference or modify economic terms
   - Identify how economic terms drive event calculations (e.g., payment calculations, settlement amounts)
   - Document how economic terms are accessed and used in event processing functions

7. **Create Comprehensive Reference Documentation:**
   - Produce documentation that serves as a complete learning resource for IR products in CDM
   - Include code references, line numbers, and evidence from the CDM codebase
   - Provide real-world examples from CDM example JSON files
   - Create diagrams or visual representations where helpful
   - Document relationships between different economic term components
   - Include comparison with other asset classes where relevant for learning

## Scope:

**In Scope:**
- **Complete Economic Terms Structure:**
  - Analysis of all `EconomicTerms` type components (dates, adjustments, payout, provisions, calculationAgent, collateral)
  - Documentation of how each component is structured and used for IR products
  - Analysis of date structures (AdjustableOrRelativeDate) and business day adjustments

- **Qualification Functions:**
  - Analysis of all qualification functions in `product-qualification-func.rosetta` related to Interest Rate products
  - Documentation of qualification logic, conditions, and rules
  - Analysis of qualification hierarchy and ISDA taxonomy mappings

- **Payout Analysis:**
  - Examination of payout type definitions and their usage in IR products
  - Identification and documentation of applicable payouts (interestRatePayout, optionPayout, forwardPayout, cashflow)
  - Identification and documentation of non-applicable payouts with explanations
  - Analysis of payout composition patterns, cardinality rules, and combinations
  - Documentation of underlier structures for options and forwards in IR context

- **Product Subtype Mapping:**
  - Documentation of all IR product subtypes and their qualification criteria
  - Mapping of economic term patterns to specific product types
  - ISDA taxonomy v1 and v2 mappings

- **Validation and Constraints:**
  - Analysis of all conditions and validation rules in `product-template-type.rosetta` and related files
  - Documentation of business rules that constrain economic term configurations
  - Date and payout validation rules

- **Event Processing:**
  - Analysis of how economic terms are used in event processing functions
  - Documentation of event functions that reference or modify economic terms for IR products
  - Examples of lifecycle event processing using economic terms

- **Examples and Evidence:**
  - Review of example JSON files demonstrating IR product structures
  - Code references with line numbers from CDM codebase
  - Real-world examples showing complete economic term configurations

- **Learning and Reference:**
  - Creation of comprehensive documentation that facilitates learning CDM
  - Comparison with other asset classes where helpful for understanding
  - Visual representations and diagrams where appropriate

**Out of Scope:**
- Implementation of qualification logic or event processing (analysis only)
- Changes to CDM codebase
- Deep dive into other asset classes (Equity, Credit, Commodity) - though reference may be made for comparison
- Analysis of Securities Financing products
- Performance optimization of functions
- Testing or validation of qualification/event logic
- Detailed analysis of non-IR specific components (e.g., general CDM architecture)

## Pre-Condition (if applicable):

1. **CDM Codebase Access:**
   - Access to CDM version 5.27.0 codebase
   - Access to Rosetta source files, particularly:
     - `product-qualification-func.rosetta` (qualification functions)
     - `product-template-type.rosetta` (EconomicTerms, Payout type definitions)
     - `product-asset-type.rosetta` (InterestRatePayout and related types)
     - `event-common-func.rosetta` (event processing functions)
     - Other relevant Rosetta files that reference economic terms
   - Access to example JSON files in the CDM repository demonstrating IR products
   - Access to Java implementation files if needed for understanding

2. **Documentation Access:**
   - Access to CDM documentation files (e.g., `product-model.md`, `repurchase-agreement-representation.md`)
   - Access to any relevant ISDA taxonomy documentation
   - Access to CDM schema documentation

3. **Analysis Tools:**
   - Tools for searching and analyzing Rosetta code (grep, semantic search, etc.)
   - Tools for examining JSON example files
   - Documentation tools for creating comprehensive analysis deliverables
   - Tools for creating diagrams or visual representations if needed

4. **Knowledge Base:**
   - Understanding of CDM product model structure and architecture
   - Familiarity with Rosetta syntax, function patterns, and type definitions
   - Understanding of Interest Rate derivative products (swaps, options, forwards, etc.)
   - Basic understanding of financial product lifecycle and event processing

---

**Deliverables:**
- **Comprehensive Analysis Document** covering:
  - Complete economic terms structure for IR products
  - IR product qualification logic and hierarchy
  - Payout analysis (applicable/non-applicable with explanations)
  - IR product subtype mappings with economic term patterns
  - Validation rules and constraints
  - Economic terms usage in event processing
  - Code references with line numbers and evidence from CDM codebase
  - Real-world examples from CDM example JSON files
  - Visual representations where helpful (diagrams, tables, etc.)

- **Reference Sections:**
  - Quick reference guide for common IR product patterns
  - Comparison table of IR product subtypes
  - Payout composition patterns reference
  - Economic term component reference guide

- **Learning Resources:**
  - Step-by-step examples showing how economic terms are structured
  - Common patterns and best practices
  - Troubleshooting guide for common issues
  - Glossary of terms and concepts

